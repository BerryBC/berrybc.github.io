---
layout: post
title:  陆拾- Dashboard 框架定立
date:   2021-12-07 23:52:42 +0800
categories: 三世书记录
author: 崔秉龙
location: Guangzhou, China
---

## 零。

我只是一个备忘录，前言后语也不怎么说吧。

## 一、设立自建 Dashboard 整体框架

参考以前设立的 `Dashboard` ，主要以 `Filter` 以及**表格**为主（其实我不懂用 `Tableau` 还要那么多表格来干嘛）。

`Dashboard` **前端**加载流程以

1. 先加载所有 `Filter` ，此前显示`等待页面`
2. 加载完 Filter 后，以当前 Filter （默认）`加载数据`
3. 如果有其中一格内容数据`完整`则`退出等待页面`
4. 慢慢`加载`所有数据及内容

**后端**则以 API 响应每个`数据内容`的`请求`，并以提供该内容的`聚合数据`给前端

## 二、手动数据准备页面

1. 建立页面，方便对特定某个 Dashboard 的`缓存`进行清理
2. 数据是否`完整`的`标识`
3. 手动文件`上传数据`页面，且展示在数据库中的`表名`（方便下载）

上述三项只制定三个页面

## 三、前端展示顺序

建立`全局`变量，包含以下内容

- **数值** - 当前请求次数
- **对象** - 当前数据内容
- **数组** - 当前哪部分数据已完成
- **数组** - 应该有哪部分数据
- **布尔值** - 等待页是否还在

#### 1) 页面加载

加载 Filter 内容 - `函数`

#### 2) Filter 加载完

开始加载当前 Filter 所对应的内容 - 触发`函数`

#### 3) 请求数据

内容是一个 `函数`

当前请求次数算为当前值+1

并行请求各类数据，且把当前请求次数传到请求函数

清空已接受的数据数组

#### 4) 接收到数据时

把当前请求次数、当前请求数据系列名字作为参数

传给展示函数 - `函数`

如果传入的当前请求数据与全局当前请求数据一致时，标识该数据系列已完成

检查有哪些框已完成，重新构建

#### 5) 当等待页存在，且接收到数据满足展示时

解除等待页
